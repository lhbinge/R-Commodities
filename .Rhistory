g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
comdata <- read.csv("Commodities.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
#comdata$date <- as.Date(comdata$date, "%Y/%m/%d")
comdata$datum <- paste(comdata$datum, comdata$Year)
comdata$date <- as.Date(as.yearmon(as.character(comdata$datum),"%B %Y"))
comdata$datum <- factor(as.yearmon(as.character(comdata$datum),"%B %Y"))
View(blue)
product <- makeindex(c("lamp.oil"))
index_plot <- melt(product, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
product <- makeindex(c("oathay"))
index_plot <- melt(product, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
product <- makeindex(c("bread"))
index_plot <- melt(product, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
product <- makeindex(c("beef"))
index_plot <- melt(product, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
#Calculate Average Prices for 1904
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
View(gewig)
#Calculate Average Prices for 1904
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
View(gewig)
produce <- cbind(wheat=makeindex(c("wheat")),oats=makeindex(c("oats")))
View(produce)
produce <- cbind(wheat=makeindex("wheat")[,c(1,3)],oats=makeindex("oats")[,2])
View(Index)
View(index_plot)
View(Index1)
produce <- cbind(Date=Index1$Date, wheat=makeindex("wheat")[,3],oats=makeindex("oats")[,3])
produce <- cbind(Date=as.Date(Index1$Date), wheat=makeindex("wheat")[,3],oats=makeindex("oats")[,3])
produce <- cbind(wheat=makeindex("wheat")[,c(1,3)],oats=makeindex("oats")[,3],oathay=makeindex("oathay")[,3],
barley=makeindex("barley")[,3],rye=makeindex("rye")[,3],peas.beans=makeindex("peas.beans")[,3],
potatoes=makeindex("potatoes")[,3],tobacco=makeindex("tobacco")[,3],d.fruit=makeindex(c("dried.fruit","d.fruit"))[,3],
wine=makeindex(c("wine","wine.better","wine.ordinary"))[,3],brandy=makeindex(c("brandy","brandy.better","brandy.ordinary"))[,3])
makeindex("oathay")
product <- makeindex(c("wheat"))
View(product)
product <- makeindex(c("oats"))
product <- makeindex(c("oathay"))
product <- makeindex(c("barley"))
product <- makeindex(c("rye"))
product <- makeindex(c("peas.beans"))
product <- makeindex(c("peas.beans"))
View(comdata)
blue <- read.csv("Blue_Books.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
rsblue <- blue[,c("date","town","oatmeal")]
rsblue$commodity <- "oatmeal"
colnames(rsblue) <- c("date","town","price","commodity")
for(i in colnames(blue)[4:62]) {
rsblue1 <- blue[,c("date","town",i)]
rsblue1$commodity <- i
colnames(rsblue1) <- c("date","town","price","commodity")
rsblue <- rbind(rsblue, rsblue1)
}
rsblue$lnprice <- log(rsblue$price)
rsblue <- transform(rsblue, id = as.numeric(interaction(factor(town),factor(commodity),drop=TRUE)))
produce <- cbind(wheat=makeindex("wheat")[,c(1,3)],oats=makeindex("oats")[,3],oathay=makeindex("oathay")[,2],
barley=makeindex("barley")[,3],rye=makeindex("rye")[,2],peas.beans=makeindex("peas.beans")[,2],
potatoes=makeindex("potatoes")[,3],tobacco=makeindex("tobacco")[,3],d.fruit=makeindex(c("dried.fruit","d.fruit"))[,2],
wine=makeindex(c("wine","wine.better","wine.ordinary"))[,2],brandy=makeindex(c("brandy","brandy.better","brandy.ordinary"))[,2])
colnames(produce)[1:2] <- c("Date","wheat")
View(gewig)
?weighted.mean
?Paache
product <- makeindex(c("cattle","d.oxen","m.cows"))
View(product)
product <- makeindex(c("s.horse","d.horse","mules","asses"))
product <- makeindex(c("sheep","w.sheep","c.sheep"))
product <- makeindex(c("swine"))
product <- makeindex(c("goats"))
product <- makeindex(c("fowls","ducks"))
livestock <- cbind(cattle=makeindex(c("cattle","d.oxen","m.cows"))[,c(1,3)],horses=makeindex(c("s.horse","d.horse","mules","asses"))[,2],
sheep=makeindex(c("sheep","w.sheep","c.sheep"))[,3],swine=makeindex("swine")[,2],goats=makeindex("goats")[,2],
fowls=makeindex(c("fowls","ducks"))[,2])
colnames(livestock)[1:2] <- c("Date","cattle")
View(livestock)
index_plot <- melt(produce, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
index_plot <- melt(livestock, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
product <- makeindex(c("butter","butter.fresh","butter.salt"))
product <- makeindex(c("w.wool","u.wool"))
product <- makeindex(c("hides"))
product <- makeindex(c("sheep.skins","goat.skins"))
pastoral <- cbind(butter=makeindex(c("butter","butter.fresh","butter.salt"))[,c(1,3)],wool=makeindex(c("w.wool","u.wool"))[,2],
hides=makeindex(c("hides"))[,2],skins=makeindex(c("sheep.skins","goat.skins"))[,2],cheese=makeindex("cheese")[,2],
fat.tallow=makeindex("fat.tallow")[,2],soap=makeindex("soap")[,2])
colnames(pastoral)[1:2] <- c("Date","butter")
View(pastoral)
index_plot <- melt(pastoral, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
product <- makeindex(c("beef"))
product <- makeindex(c("mutton"))
product <- makeindex(c("pork","bacon"))
product <- makeindex(c("eggs"))
product <- makeindex(c("bread"))
product <- makeindex(c("wheat.flour","flour"))
provisions <- cbind(beef=makeindex("beef")[,c(1,3)],mutton=makeindex("mutton")[,3],pork=makeindex(c("pork","bacon"))[,2],
eggs=makeindex("eggs")[,2],bread=makeindex("bread")[,3],beer=makeindex(c("beer.eng","beer.col"))[,2],
mealie.meal=makeindex("mealie.meal")[,2],boer.meal=makeindex("boer.meal")[,2],oatmeal=makeindex("oatmeal")[,2],
tea=makeindex("tea")[,2],coffee=makeindex("coffee")[,2],sugar=makeindex("sugar")[,2],rice=makeindex("rice")[,2],
salt=makeindex("salt")[,2],milk=makeindex("milk")[,2],candles=makeindex("candles")[,2])
colnames(provisions)[1:2] <- c("Date","beef")
View(provisions)
index_plot <- melt(provisions, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
?micEcon
library(micEcon)
?priceIndex
colnames(livestock)
colnames(livestock)[-1]
livestock$Date
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
View(gewig)
colnames(gewig)
colnames(gewig)[20:25]
toets <- cbind(livestock,gewig[,20:25])
View(toets)
priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],toets)
priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=TRUE)
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=TRUE)
check
check <- as.data.frame(check)
View(check)
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
toets <- cbind(livestock,gewig[,20:25])
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=TRUE)
check <- as.data.frame(check)
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=FALSE)
check <- as.data.frame(check)
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=FALSE, weights = TRUE)
check <- as.data.frame(check)
?weighted.mean
priceIndex()
priceIndex
micEconIndex
check <- weighted.mean(livestock[,1],gewig[,20:25])
check <- weighted.mean(livestock[,-1],gewig[,20:25])
check <- weighted.mean(livestock[,-1],gewig[,20:25],na.rm=TRUE)
livestock[,-1]
gewig[,20:25]
check <- weighted.mean(toets[,2:7],toets[,8:13],na.rm=TRUE)
str(toets)
check <- weighted.mean(toets[1,2:7],toets[1,8:13],na.rm=TRUE)
?sapply
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:7],toets[i,8:13],na.rm=TRUE)
}
i <- 1
check[i,1] <- weighted.mean(toets[i,2:7],toets[i,8:13],na.rm=TRUE)
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:7],toets[i,8:13],na.rm=TRUE)
}
View(comdata)
product <- makeindex(c("mealies"))
index_plot <- melt(product, id="Date")  # convert to long format
g <- ggplot(data=index_plot,aes(x=Date, y=value, group=variable, colour=variable))
g <- g + geom_point(size = 1)
g <- g + geom_line()
g <- g + ylab("Index")
g <- g + xlab("")
g <- g + theme(axis.text.x=element_text(angle=90,hjust=1,vjust=0.5))
g <- g + theme(legend.title=element_blank()) + theme(legend.position="bottom")
g <- g + scale_x_date(labels = date_format("%Y"),breaks = date_breaks("year"))
g
produce <- cbind(wheat=makeindex("wheat")[,c(1,3)],mealies=makeindex("mealies")[,3],barley=makeindex("barley")[,3],oats=makeindex("oats")[,3],
oathay=makeindex("oathay")[,2],rye=makeindex("rye")[,2],peas.beans=makeindex("peas.beans")[,2],
potatoes=makeindex("potatoes")[,3],tobacco=makeindex("tobacco")[,3],d.fruit=makeindex(c("dried.fruit","d.fruit"))[,2],
wine=makeindex(c("wine","wine.better","wine.ordinary"))[,2],brandy=makeindex(c("brandy","brandy.better","brandy.ordinary"))[,2])
colnames(produce)[1:2] <- c("Date","wheat")
#LIVESTOCK:
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
toets <- cbind(produce,gewig[,1:12])
toets <- cbind(produce,gewig[,1:12])
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:13],toets[i,13:25],na.rm=TRUE)
}
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:13],toets[i,14:25],na.rm=TRUE)
}
write.xlsx(produce,"toets.xlsx")
write.xls(produce,"toets.xls")
write.csv(produce,"toets.csv")
write.csv(check,"toets.csv")
write.csv(pastoral,"toets.csv")
gewig <- read.csv("Weights.csv", header=TRUE, sep=",",na.strings = "", skipNul = TRUE)
pastoral <- cbind(wool=makeindex(c("w.wool","u.wool"))[,2],hides=makeindex(c("hides"))[,2],skins=makeindex(c("sheep.skins","goat.skins"))[,2],
butter=makeindex(c("butter","butter.fresh","butter.salt"))[,c(1,3)],cheese=makeindex("cheese")[,2],
fat.tallow=makeindex("fat.tallow")[,2],soap=makeindex("soap")[,2])
colnames(pastoral)[1:2] <- c("Date","butter")
pastoral <- cbind(wool=makeindex(c("w.wool","u.wool"))[,1:2],hides=makeindex(c("hides"))[,2],skins=makeindex(c("sheep.skins","goat.skins"))[,2],
butter=makeindex(c("butter","butter.fresh","butter.salt"))[,3],cheese=makeindex("cheese")[,2],
fat.tallow=makeindex("fat.tallow")[,2],soap=makeindex("soap")[,2])
colnames(pastoral)[1:2] <- c("Date","butter")
colnames(pastoral)[1:2] <- c("Date","wool")
toets <- cbind(pastoral,gewig[,13:19])
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:8],toets[i,9:15],na.rm=TRUE)
}
write.csv(check,"toets.csv")
write.csv(check,"toets.csv")
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=FALSE, weights = TRUE)
toets <- cbind(livestock,gewig[,20:25])
check <- priceIndex(colnames(livestock)[-1],colnames(gewig)[20:25],1,toets,na.rm=FALSE, weights = TRUE)
write.csv(check,"toets.csv")
toets <- cbind(produce,gewig[,1:12])
toets <- produce
toets <- diff(produce)
toets <- diff(produce[,-1])
toets <- produce[,-1]
toets <- log(produce[,-1])
toets <- diff(log(produce[,-1]))
toets <- diff(log(produce[,-1]))
toets <- diff(toets)
str(toets)
?diff
toets <- diff(toets)
toets <- diff(toets[,1])
toets <- as.data.frame(toets)
View(toets)
for(i in 2:299) {
toets <- produce[i,2]/produce[i-1,2]
}
toets <- data.frame()
toets[1,1] <- 1
for(i in 2:299) {
toets[i,1] <- produce[i,2]/produce[i-1,2]
}
toets <- data.frame()
toets$Date <- produce$Date
for(j in 2:ncol(produce)) {
toets[1,j] <- 1
for(i in 2:299) {
toets[i,j] <- produce[i,j]/produce[i-1,j]
}
}
toets <- data.frame()
toets$Date <- produce$Date
toets <- produce
for(j in 2:ncol(produce)) {
toets[1,j] <- 1
for(i in 2:299) {
toets[i,j] <- produce[i,j]/produce[i-1,j]
}
}
toets <- cbind(toets,gewig[,1:12])
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:13],toets[i,14:25],na.rm=TRUE)
}
toets$produce[1] <- check[1,1]*100
for(i in 2:299) {
toets$produce[i] <- check[i,1]*check[i+1,1]
}
i <- 2
check[i,1]
check[i+1,1]
for(i in 2:299) {
toets$produce[i] <- check[i,1]*toets$produce[i-1]
}
?tail
head(letters)
apply(toets, 1, function(x) tail(na.omit(x), 1))
i <-1
i <-2
!is.na(toets$produce[i-1])
?seq
?rep
toets$produce[1] <- check[1,1]*100
for(i in 2:299) {
if(!is.na(toets$produce[i-1])) {
toets$produce[i] <- check[i,1]*toets$produce[i-1]
} else {
tel <- 1
repeat {
tel <- tel + 1
if(!is.na(toets$produce[i-tel])) {
toets$produce[i] <- check[i,1]*toets$produce[i-tel]
break
}
}
}
}
toets <- produce
for(j in 2:ncol(produce)) {
toets[1,j] <- 1
for(i in 2:299) {
tel <- 0
repeat {
tel <- tel + 1
if(!is.na(produce[i-tel,j])) {
toets[i,j] <- produce[i,j]/produce[i-tel,j]
break
}
}
}
}
toets <- cbind(toets,gewig[,1:12])  #Kry dan weighted average
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:13],toets[i,14:25],na.rm=TRUE)
}
toets$produce[1] <- check[1,1]*100
for(i in 2:299) {        #maak dan die indeks
if(!is.na(toets$produce[i-1])) {
toets$produce[i] <- check[i,1]*toets$produce[i-1]
} else {
tel <- 1
repeat {
tel <- tel + 1
if(!is.na(toets$produce[i-tel])) {
toets$produce[i] <- check[i,1]*toets$produce[i-tel]
break
}
}
}
}
toets <- produce
for(j in 2:ncol(produce)) {   #maak eers die growth rates
toets[1,j] <- 1
for(i in 2:299) {
tel <- 0
repeat {
tel <- tel + 1
if(!is.na(produce[i-tel,j])) {
toets[i,j] <- produce[i,j]/produce[i-tel,j]
break
}
}
}
}
toets <- produce
for(j in 2:ncol(produce)) {   #maak eers die growth rates
toets[1,j] <- 1
for(i in 2:299) {
tel <- 0
repeat {
tel <- tel + 1
if(!is.na(produce[i-tel,j])) {
toets[i,j] <- produce[i,j]/produce[i-tel,j]
break
}
}
}
}
toets <- cbind(toets,gewig[,1:12])  #Kry dan weighted average
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:13],toets[i,14:25],na.rm=TRUE)
}
toets$produce[1] <- check[1,1]*100
for(i in 2:299) {        #maak dan die indeks
if(!is.na(toets$produce[i-1])) {
toets$produce[i] <- check[i,1]*toets$produce[i-1]
} else {
tel <- 1
repeat {
tel <- tel + 1
if(!is.na(toets$produce[i-tel])) {
toets$produce[i] <- check[i,1]*toets$produce[i-tel]
break
}
}
}
}
produce$index <- toets$produce
write.csv(produce, "toets.csv")
toets <- pastoral
for(j in 2:ncol(pastoral)) {   #maak eers die growth rates
toets[1,j] <- 1
for(i in 2:299) {
tel <- 0
repeat {
tel <- tel + 1
if(!is.na(pastoral[i-tel,j])) {
toets[i,j] <- pastoral[i,j]/pastoral[i-tel,j]
break
}
}
}
}
toets <- cbind(toets,gewig[,13:19])  #Kry dan weighted average
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:8],toets[i,9:15],na.rm=TRUE)
}
toets$pastoral[1] <- check[1,1]*100
for(i in 2:299) {        #maak dan die indeks
if(!is.na(toets$pastoral[i-1])) {
toets$pastoral[i] <- check[i,1]*toets$pastoral[i-1]
} else {
tel <- 1
repeat {
tel <- tel + 1
if(!is.na(toets$pastoral[i-tel])) {
toets$pastoral[i] <- check[i,1]*toets$pastoral[i-tel]
break
}
}
}
}
pastoral$index <- toets$pastoral
write.csv(pastoral, "toets.csv")
toets <- livestock
for(j in 2:ncol(livestock)) {   #maak eers die growth rates
toets[1,j] <- 1
for(i in 2:299) {
tel <- 0
repeat {
tel <- tel + 1
if(!is.na(livestock[i-tel,j])) {
toets[i,j] <- livestock[i,j]/livestock[i-tel,j]
break
}
}
}
}
toets <- cbind(toets,gewig[,20:25])  #Kry dan weighted average
check <- data.frame()
for(i in 1:299) {
check[i,1] <- weighted.mean(toets[i,2:7],toets[i,8:13],na.rm=TRUE)
}
toets$livestock[1] <- check[1,1]*100
for(i in 2:299) {        #maak dan die indeks
if(!is.na(toets$livestock[i-1])) {
toets$livestock[i] <- check[i,1]*toets$livestock[i-1]
} else {
tel <- 1
repeat {
tel <- tel + 1
if(!is.na(toets$livestock[i-tel])) {
toets$livestock[i] <- check[i,1]*toets$livestock[i-tel]
break
}
}
}
}
livestock$index <- toets$livestock
View(livestock)
write.csv(livestock, "toets.csv")
